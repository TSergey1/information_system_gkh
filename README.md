# Тестовое задание (кварт плата)
[![License MIT](https://img.shields.io/badge/licence-MIT-green)](https://opensource.org/license/mit/)
[![Python](https://img.shields.io/badge/-Python-464646?style=flat-square&logo=Python)](https://www.python.org/)
[![Django](https://img.shields.io/badge/-Django-464646?style=flat-square&logo=Django)](https://www.djangoproject.com/)
[![Django REST Framework](https://img.shields.io/badge/-Django%20REST%20Framework-464646?style=flat-square&logo=Django%20REST%20Framework)](https://www.django-rest-framework.org/)

[![docker](https://img.shields.io/badge/-Docker-464646?style=flat-square&logo=docker)](https://www.docker.com/)

<details> 
  <summary>Текстовое задание</summary>

## Задание:
1.
Реализовать модели данных «Дом», «Квартира», «Счётчик воды», «Тариф»,
учитывая связи между ними.
В доме может быть много квартир. В квартире может быть несколько счётчиков.
У квартиры должна быть площадь (будет нужно для расчёта платы за содержание
общего имущества).
Для счётчика нужно хранить показания за несколько прошедших месяцев.
Тариф — это цена услуги или ресурса (например, цена за единицу объёма воды),
используется для расчёта платы за коммунальные услуги.
2.
Реализовать API для ввода и вывода данных по дому (например, адрес дома, список
квартир и т. п., должны выводиться данные из нескольких моделей).
3.
Реализовать функцию расчёта квартплаты для всех квартир в доме за какой-либо
месяц. Результаты записывать в БД. Функция должна сохранять прогресс расчёта.
Квартплата включает в себя:
● Водоснабжение. Рассчитывается по расходу воды за месяц
(тариф_за_единицу_объёма × расход). Расход — это разница между показаниями
счётчика за текущий и за предыдущий месяц.
● Содержание общего имущества. Рассчитывается на основе площади квартиры
(тариф_за_единицу_площади × площадь_квартиры).
4.
Реализовать API, которое запускает процесс расчёта квартплаты
в фоновом режиме (например в celery), и затем позволяет получить прогресс расчёта.
Стек технологий:
На усмотрение кандидата. Рекомендуется использовать fastapi, celery, mongodb или
django, celery, postgresql.
Проект выложить на github.
</details>


# Подготовка и запуск проекта
Склонировать репозиторий на локальную машину:
```
git clone git@github.com:TSergey1/....git
```
Периименовать файл .env.example в .env:

 Запускаем проект:
Для запуска проекта, необходимо выполнить в каталоге приложения: ``` docker compose up  ```

Сервер слушает по адресу ``` http://127.0.0.1:8000 ```

Сервер слушает по адресу ``` http://127.0.0.1:8000 ```

## Справка по API

<details>
    <summary>User</summary>

#### Получение смс для регистрации (смс пичатается в консоль)
``` http POST /api/login/ ```

Получение смс для авторизация

| Parameter | Type     | Description                        |
|:----------| :------- |:-----------------------------------|
| `phone`   | `string` | **Обязательно**. Номер телефона |

#### Регистрации по коду из смс (смс пичатается в консоль)
``` http POST /api/verify/ ```

Авторизация пользователя в системе (получение токена)

| Parameter | Type     | Description                        |
|:----------| :------- |:-----------------------------------|
| `phone`   | `string` | **Обязательно**. Номер телефона |
| `token`   | `int` | **Обязательно**. Код из смс |

#### Профиль пользователя
``` http GET /api/profile/ ```

Профиль пользователя:

| Parameter |  Description                        |
|:----------| :-----------------------------------|
| `phone`   |  Номер телефона |
| `invite_code`   | Invite_code пользователя  |
| `foreign_invite_code`   | Invite_code на который подписан пользователь  |
| `activated_your_code`   | Список телефонов подписавшихся на пользователя |


#### Профиль пользователя
``` http PATCH /api/profile/ ```

Подписка на пользователя по Invite_code:

| Parameter | Type     | Description                        |
|:----------| :------- |:-----------------------------------|
| `foreign_invite_code`   | `string` | **Не обязательно**. Invite_code для подписки |
